const p=async e=>{const n=(await c()).find(o=>o.id==e);if(!n)throw new Error("思维导图不存在");return{...n,nodes:a(n)}},a=e=>{const t={id:"root",text:e.title,children:[]};for(let n=0;n<3;n++)t.children.push({id:`material-${n}`,text:`资料 ${n+1}`,data:{materialId:n+1,type:"material"}});return[t]},r={mindmaps:[],nextId:4};r.mindmaps.length===0&&(r.mindmaps=[{id:1,title:"Python基础知识",description:"Python语言核心概念和基础语法的思维导图",createdAt:"2023-06-10",nodeCount:35,creator:"管理员",relatedMaterials:[1]},{id:2,title:"数据结构与算法",description:"常见数据结构和算法的整理与分析",createdAt:"2023-05-22",nodeCount:42,creator:"张三",relatedMaterials:[2]},{id:3,title:"Web开发技术栈",description:"前后端开发技术栈的全面梳理",createdAt:"2023-06-01",nodeCount:50,creator:"李四",relatedMaterials:[4]}]);const c=()=>new Promise(e=>{setTimeout(()=>{e(r.mindmaps)},300)}),w=e=>new Promise(t=>{const n={id:r.nextId++,title:e.title,description:e.description,createdAt:new Date().toISOString().split("T")[0],nodeCount:1,creator:e.creator||"当前用户",relatedMaterials:e.relatedMaterials||[]};r.mindmaps.unshift(n),setTimeout(()=>{t(n)},500)}),M=(e,t)=>new Promise((n,o)=>{const s=r.mindmaps.findIndex(d=>d.id===e);if(s===-1){o(new Error("思维导图不存在"));return}const i={...r.mindmaps[s],...t};r.mindmaps[s]=i,setTimeout(()=>{n(i)},300)}),h=e=>new Promise(t=>{console.log("将资料添加到思维导图搜索引擎索引:",e.name);const n=l(e),o=u(e);m(e,n,o),setTimeout(()=>{t({success:!0,keywords:n,category:o})},500)}),l=e=>{const t=[],n=`${e.name} ${e.description}`.toLowerCase();return["python","javascript","html","css","react","vue","angular","数据结构","算法","机器学习","深度学习","人工智能","web开发","前端","后端","数据库","sql","nosql","mongodb","mysql"].forEach(s=>{n.includes(s.toLowerCase())&&t.push(s)}),t},u=e=>{const t=`${e.name} ${e.description}`.toLowerCase();return t.includes("python")||t.includes("编程")||t.includes("语言")?"编程语言":t.includes("数据结构")||t.includes("算法")?"数据结构与算法":t.includes("web")||t.includes("前端")||t.includes("html")?"Web开发":t.includes("机器学习")||t.includes("深度学习")||t.includes("人工智能")?"人工智能":"其他"},m=(e,t,n)=>{console.log(`根据资料「${e.name}」更新相关思维导图，关键词: ${t.join(", ")}, 分类: ${n}`);const o=r.mindmaps.filter(s=>s.title.toLowerCase().includes(n.toLowerCase())||t.some(i=>s.title.toLowerCase().includes(i.toLowerCase())));o.length>0?o.forEach(s=>{s.relatedMaterials.includes(e.id)||(s.relatedMaterials.push(e.id),console.log(`将资料「${e.name}」关联到思维导图「${s.title}」`))}):console.log(`没有找到与资料「${e.name}」匹配的思维导图，可以考虑创建一个新的`)};export{p as a,h as b,w as c,c as g,M as u};
